<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		
			<title>Translating Panel Content Titles Using Tokens | Myplanet Digital</title>
		
		
			<meta name="description" content="We recently encountered a specific situation with a Drupal site that had to be retro-fitted for translation.">
		
		<meta name="generator" content="DocPad v6.63.2" />
		
		<!--[if !IE]> -->
		<link  rel="stylesheet" href="/styles/main.css" />
		<!-- <![endif]-->
		
		<!--[if (IE 8) | (IE 9)]>
		<link rel="stylesheet" href="/styles/site-ie8.css">				
		<![endif]-->

		<!--[if IE 8]>
		<script src="/scripts/vendor/html5shiv.js"></script>
		<script>
			window.html5 = {
				'elements': 'section article footer',
				'shivCSS': false,
				'shivMethods': false				
			}
			window.isIE8 = true;
		</script> 
		<![endif]-->
		<link rel="icon" type="image/png" href="/favicon.png" />
	</head>

	<body class=" article ">
		<div id="wrap">
			<h1 id="logo">
				<a href="/">Myplanet</a>
			</h1>
			<div id="viewport">
				
				<section id="main">
					<div class="main-wrap">
						
					</div>
				</section>
				
				<!--[if (!IE) | (gte IE 10)]> -->
				<article id="article">					
					<!-- Article goes here for modern browsers -->
					




	










	
	
	
	
	





<div class="article-header" style="background-image: url(/images/default-covers/5.jpg)">
	
		<h1 class="article-title">
			
				
				<span>Translating Panel</span><span>Content Titles</span><span>Using Tokens</span>
			
		</h1>
	
</div>




<div class="article-body">
	<div class="article-info">

		


		
			<div class="author-picture">
				
					<a href="/people/jeremy-lichtman">
						<img src="/associated-files/people/jeremy-lichtman/avatar.jpg" alt="Author Picture" />
					</a>
				
			</div>
		


		

		
			<div class="author-info">

				

				
					
						<a class="author-name" href="/people/jeremy-lichtman">Jeremy Lichtman</a>
					
				


				
				
					<span class="date">Wednesday, Jul 10, 2013<span>
				

			</div>
		

		
		
			<ul class="article-tags">
				
					<li><a href="/tags/technology">technology</a></li>
				
			</ul>
		
	</div>


	

	
		<div class="article-content">
			<h2 id="we-recently-encountered-a-specific-situation-with-a-drupal-site-that-had-to-be-retro-fitted-for-translation-">We recently encountered a specific situation with a Drupal site that had to be retro-fitted for translation.</h2>
<p>The titles of content items within a panel page are not translatable.</p>
<p>There is an issue in the queue for panels, but it has been open for two years now, and it is unlikely to be resolved any time soon. There are also many somewhat hackish work-arounds - i.e. using blocks with the title inserted as content instead - but we found a cleaner way to do this using tokens, which panels do provide support for.</p>
<p>If you&#39;ve ever coded a custom block, the methodology for creating tokens will look familiar. In a custom module, you first implement hook_token_info(), which lets Drupal know about the list of tokens that your module will provide, and then implement hook_tokens(), which actually outputs the content of the code.</p>
<pre><code class="lang-php">function test_token_info() {
    $type = array(
        &#39;name&#39; =&gt; t(&#39;Test Tokens&#39;),
        &#39;description&#39; =&gt; t(&#39;Tokens for i18n experiment.&#39;)
    );

$test[&#39;test_panel_translation_title&#39;] = array(
    &#39;name&#39; =&gt; t(&quot;Test title translation&quot;),
    &#39;description&#39; =&gt; t(&#39;Translatable version of panel content title&#39;),
);

return array(
        &#39;types&#39; =&gt; array(&#39;test&#39; =&gt; $type),
        &#39;tokens&#39; =&gt; array(&#39;test&#39; =&gt; $test),
    );
}
</code></pre>
<p>The code, above, lets Drupal know what this module produces in the way of tokens. The $type array contains information that will be displayed about the module itself, and the $test array contains information about the token itself. You can add many tokens into the $test array, of course (and name the array appropriately for your module as well).</p>
<pre><code class="lang-php">    /**
      * Implements hook_tokens().
      */

    function test_tokens($type, $tokens, array $data = array(), array $options = array()){
        return array(
            &#39;test_panel_translation_title&#39; =&gt; t(&#39;My title is now translatable&#39;),
        );
    }
</code></pre>
<p>The code, above, actually produces the contents of the token. Note that we have wrapped our text in t(), so it is translatable.</p>
<p>You&#39;ll obviously need to enable your module (in addition to the <a href="https://drupal.org/project/token">token module</a>) and clear your cache.</p>
<p>Now let&#39;s see how we can use the new token inside of panels.</p>
<p><img src="/associated-files/article/translating-panel-content-tiles-using-tokens/body_1.jpg" alt=""></p>
<p>As you can see, we need to first add something into your panel that lets it know that you are going to be using tokens. After you add in tokens, you&#39;ll see your new tokens listed.</p>
<p><img src="/associated-files/article/translating-panel-content-tiles-using-tokens/body_2.jpg" alt=""></p>
<p><img src="/associated-files/article/translating-panel-content-tiles-using-tokens/body_3.jpg" alt=""></p>
<p><img src="/associated-files/article/translating-panel-content-tiles-using-tokens/body_4.jpg" alt=""></p>
<p>Now we can actually change our content title to a token.</p>
<p><img src="/associated-files/article/translating-panel-content-tiles-using-tokens/body_5.jpg" alt=""></p>
<p>The token appears in the list of available substitutions, so you don&#39;t need to remember it.</p>
<p><img src="/associated-files/article/translating-panel-content-tiles-using-tokens/body_6.jpg" alt=""></p>
<p>ou&#39;ll need to select the &quot;Use context keywords&quot; option so that panels knows that it needs to make substitutions on tokens in this content item.</p>
<p>Aside: We can also use tokens inside of content itself.</p>
<p><img src="/associated-files/article/translating-panel-content-tiles-using-tokens/body_7.jpg" alt=""></p>
<p>If you are exporting your panel to code (i.e. with features), the token will appear in the actual code as well.</p>
<p><img src="/associated-files/article/translating-panel-content-tiles-using-tokens/body_8.jpg" alt=""></p>
<p>As you can see, using tokens is a simple method, producing clean, easy to document code, for translating items in Drupal that are otherwise hard to make translatable.</p>


			
			<div class="article-footer">
				<div class="footer-doodle careers"></div>
			</div>
		</div>
	

</div>
					
				</article>
				<!-- <![endif]-->

				<!--[if (IE 8) | (IE 9)]>
				
				<article id="article">										
					




	










	
	
	
	
	





<div class="article-header" style="background-image: url(/images/default-covers/5.jpg)">
	
		<h1 class="article-title">
			
				
				<span>Translating Panel</span><span>Content Titles</span><span>Using Tokens</span>
			
		</h1>
	
</div>




<div class="article-body">
	<div class="article-info">

		


		
			<div class="author-picture">
				
					<a href="/people/jeremy-lichtman">
						<img src="/associated-files/people/jeremy-lichtman/avatar.jpg" alt="Author Picture" />
					</a>
				
			</div>
		


		

		
			<div class="author-info">

				

				
					
						<a class="author-name" href="/people/jeremy-lichtman">Jeremy Lichtman</a>
					
				


				
				
					<span class="date">Wednesday, Jul 10, 2013<span>
				

			</div>
		

		
		
			<ul class="article-tags">
				
					<li><a href="/tags/technology">technology</a></li>
				
			</ul>
		
	</div>


	

	
		<div class="article-content">
			<h2 id="we-recently-encountered-a-specific-situation-with-a-drupal-site-that-had-to-be-retro-fitted-for-translation-">We recently encountered a specific situation with a Drupal site that had to be retro-fitted for translation.</h2>
<p>The titles of content items within a panel page are not translatable.</p>
<p>There is an issue in the queue for panels, but it has been open for two years now, and it is unlikely to be resolved any time soon. There are also many somewhat hackish work-arounds - i.e. using blocks with the title inserted as content instead - but we found a cleaner way to do this using tokens, which panels do provide support for.</p>
<p>If you&#39;ve ever coded a custom block, the methodology for creating tokens will look familiar. In a custom module, you first implement hook_token_info(), which lets Drupal know about the list of tokens that your module will provide, and then implement hook_tokens(), which actually outputs the content of the code.</p>
<pre><code class="lang-php">function test_token_info() {
    $type = array(
        &#39;name&#39; =&gt; t(&#39;Test Tokens&#39;),
        &#39;description&#39; =&gt; t(&#39;Tokens for i18n experiment.&#39;)
    );

$test[&#39;test_panel_translation_title&#39;] = array(
    &#39;name&#39; =&gt; t(&quot;Test title translation&quot;),
    &#39;description&#39; =&gt; t(&#39;Translatable version of panel content title&#39;),
);

return array(
        &#39;types&#39; =&gt; array(&#39;test&#39; =&gt; $type),
        &#39;tokens&#39; =&gt; array(&#39;test&#39; =&gt; $test),
    );
}
</code></pre>
<p>The code, above, lets Drupal know what this module produces in the way of tokens. The $type array contains information that will be displayed about the module itself, and the $test array contains information about the token itself. You can add many tokens into the $test array, of course (and name the array appropriately for your module as well).</p>
<pre><code class="lang-php">    /**
      * Implements hook_tokens().
      */

    function test_tokens($type, $tokens, array $data = array(), array $options = array()){
        return array(
            &#39;test_panel_translation_title&#39; =&gt; t(&#39;My title is now translatable&#39;),
        );
    }
</code></pre>
<p>The code, above, actually produces the contents of the token. Note that we have wrapped our text in t(), so it is translatable.</p>
<p>You&#39;ll obviously need to enable your module (in addition to the <a href="https://drupal.org/project/token">token module</a>) and clear your cache.</p>
<p>Now let&#39;s see how we can use the new token inside of panels.</p>
<p><img src="/associated-files/article/translating-panel-content-tiles-using-tokens/body_1.jpg" alt=""></p>
<p>As you can see, we need to first add something into your panel that lets it know that you are going to be using tokens. After you add in tokens, you&#39;ll see your new tokens listed.</p>
<p><img src="/associated-files/article/translating-panel-content-tiles-using-tokens/body_2.jpg" alt=""></p>
<p><img src="/associated-files/article/translating-panel-content-tiles-using-tokens/body_3.jpg" alt=""></p>
<p><img src="/associated-files/article/translating-panel-content-tiles-using-tokens/body_4.jpg" alt=""></p>
<p>Now we can actually change our content title to a token.</p>
<p><img src="/associated-files/article/translating-panel-content-tiles-using-tokens/body_5.jpg" alt=""></p>
<p>The token appears in the list of available substitutions, so you don&#39;t need to remember it.</p>
<p><img src="/associated-files/article/translating-panel-content-tiles-using-tokens/body_6.jpg" alt=""></p>
<p>ou&#39;ll need to select the &quot;Use context keywords&quot; option so that panels knows that it needs to make substitutions on tokens in this content item.</p>
<p>Aside: We can also use tokens inside of content itself.</p>
<p><img src="/associated-files/article/translating-panel-content-tiles-using-tokens/body_7.jpg" alt=""></p>
<p>If you are exporting your panel to code (i.e. with features), the token will appear in the actual code as well.</p>
<p><img src="/associated-files/article/translating-panel-content-tiles-using-tokens/body_8.jpg" alt=""></p>
<p>As you can see, using tokens is a simple method, producing clean, easy to document code, for translating items in Drupal that are otherwise hard to make translatable.</p>


			
			<div class="article-footer">
				<div class="footer-doodle careers"></div>
			</div>
		</div>
	

</div>

				</article>
				
				<![endif]-->
				
			</div>

			<!-- MENU GOES HERE -->
			<div id="menu">
	<ul class="nav navbar-nav">
		
			
				<li class="all">
					<a href="/"><span>All articles</span></a>
				</li>
			
		
			
				<li class="people">
					<a href="/tags/people"><span>Our People</span></a>
				</li>
			
		
			
				<li class="careers">
					<a href="/tags/careers"><span>Careers Opps</span></a>
				</li>
			
		
			
				<li class="design">
					<a href="/tags/design"><span>Design Thinking</span></a>
				</li>
			
		
			
				<li class="technology">
					<a href="/tags/technology"><span>Tech Thinking</span></a>
				</li>
			
		
			
				<li class="business">
					<a href="/tags/business"><span>Business Thinking</span></a>
				</li>
			
		
		<li class="contact page"><a href="#footer"><span>Contact Us</span></a></li>
	</ul>
</div>

<!--[if (!IE) | (gte IE 10)]> -->
<button id="menu-toggle">Show Menu</button>
<!-- <![endif]-->

		</div>

		<footer id="footer">
	<div class="contact-info">
		<span>hello@myplanet.io</span>
		<span>866-232-7456</span>
	</div>
	<div class="additional-info">
		<div class="contact">
			<h3>Myplanet</h3>
			<span>866-232-7456</span>
			<span>hello@myplanet.io</span>
			<ul class="social-media-footer">
				<li><a class="twitter" href="">Twitter</a></li>
				<li><a class="facebook" href="">Facebook</a></li>
				<li><a class="dribbble" href="">Dribbble</a></li>
				<li><a class="drupal" href="">Drupal</a></li>
				<li><a class="linkedin" href="">Linkedin</a></li>
			</ul>
		</div>
		<div class="address toronto">
			<h3>Toronto</h3>
			<span>252 Adelaide St E</span>
			<span>Toronto, Ontario</span>
			<span>M5A 1N1</span>
		</div>
		<div class="address vancouver">
			<h3>Vancouver</h3>
			<span>312-510 West Hastings</span>
			<span>Vancouver, BC</span>
			<span>V6B 1L8</span>
		</div>
		<div class="address chernihiv">
			<h3>Chernihiv</h3>
			<span>TBD</span>
		</div>
	</div>
</footer>

		<!--[if IE 8]>
		<script src="/scripts/vendor/jquery-1.11.0.min.js"></script> 
		<![endif]-->
		<!--[if (!IE) | (gte IE 9)]> -->
		<script src="/scripts/vendor/jquery-2.1.0.min.js"></script>
		<!-- <![endif]-->
		<script >(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-16401713-2');
ga('send', 'pageview');</script><script defer="defer"  src="/scripts/vendor/isotope-beta2.pkgd.min.js"></script><script defer="defer"  src="/scripts/main.js"></script><script defer="defer"  src="/scripts/pollyfill.js"></script><script defer="defer"  src="/scripts/vendor/scrollfix.js"></script><script defer="defer"  src="/scripts/modules/tiles.js"></script><script defer="defer"  src="/scripts/modules/menu.js"></script><script defer="defer"  src="/scripts/main.js"></script><script defer="defer"  src="/scripts/animator.js"></script><script defer="defer"  src="/scripts/vendor/fastclick.js"></script><script defer="defer"  src="/scripts/init.js"></script><script defer="defer"  src="/scripts/vendor/prism.js"></script>
	</body>
</html>
