<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=0">
		
			<title>Translating Panel Content Titles Using Tokens | Myplanet Digital</title>
		
		<script>
			 (new Image()).src = "/images/loading.gif";
		</script>
		
			<meta name="description" content="We recently encountered a specific situation with a Drupal site that had to be retro-fitted for translation.">
		
		<meta name="generator" content="DocPad v6.64.0" />
		<!--[if !IE]> -->
		<link  rel="stylesheet" href="/swat/styles/main.css" />
		<!-- <![endif]-->

		<!--[if (IE 8) | (IE 9)]>
		<link rel="stylesheet" href="/swat/styles/site-ie8.css">
		<![endif]-->

		<!--[if IE 8]>
		<script src="/swat/scripts/vendor/html5shiv.js"></script>
		<script>
			window.html5 = {
				'elements': 'section article footer',
				'shivCSS': false,
				'shivMethods': false
			}
			window.isIE8 = true;
		</script>
		<![endif]-->
		<link rel="icon" type="image/png" href="/swat/favicon.png" />
	</head>

	<body class="article ">
		<div id="wrap">
			<h1 id="logo">
				<a href="/swat/">Myplanet</a>
			</h1>
			<div id="back">
				<a href="/swat/" data-attr="back">Back</a>
			</div>
			<div id="viewport">

				<!--[if (!IE) | (gte IE 10)]> -->
				<section id="main" style="transition: none; -webkit-transition: none; position: absolute;">

					<div id="banner" class="">
						<div class="banner-text">
						
						</div>
					</div>

					<div class="main-wrap" style="position: relative;">
						
						<script src="/swat/scripts/vendor/isotope-beta2.pkgd.min.js"></script>
						<script>
						
							window.initializeTiles = function(){
						
						    window.tiles = new Isotope( '.main-wrap', {
  itemSelector: '.tile',
  filter: '.visible',
  masonry: {
    columnWidth: '.grid-size'
  },
  transitionDuration: 0,
  visibleStyle: {},
  hiddenStyle: {}
});

var loadingGif = new Image();

loadingGif.src = "/images/loading.gif";
loadingGif.onload = function () {
  if('ontouchstart' in window) {
      var els = document.querySelectorAll('.tile'),
          len = els.length;
      while(len--) {
          els[len].style.opacity = 1;
      }
  }
};

window.currentTag = function() {
  return $('#menu').find('li.active').attr('class').split(' ')[0];
};
						
							};
						
						</script>
					</div>
					<div class="loading-overlay-tiles" >
						<div class="loading-spinner"></div>
					</div>
					<footer class="footer" id="contact">
	<div class="contact-info">
		<div class="email-us">
			<h3>e-mail us</h3>
			<p>hello@myplanet.io</p>
		</div>
		<div class="call-us">
			<h3>call us</h3>
			<p>1-866-232-7456</p>
		</div>
	</div>
	<div class="additional-info">
		<div class="contact">
			<h3>Connect with us</h3>
			<ul class="social-media-footer">
				<li><a class="twitter" href="http://twitter.com/myplanetHQ" target="_blank">Twitter</a></li>
				<li><a class="facebook" href="http://www.facebook.com/myplanetHQ" target="_blank">Facebook</a></li>
				<li><a class="dribbble" href="http://dribbble.com/myplanet" target="_blank">Dribbble</a></li>
				<li><a class="drupal" href="http://drupal.org/node/1121200" target="_blank">Drupal</a></li>
				<li><a class="linkedin" href="http://www.linkedin.com/company/701891" target="_blank">Linkedin</a></li>
			</ul>
		</div>
		<div class="address toronto">
			<h3>Toronto</h3>
			<a data-long-lat="43.65163,-79.37104" href="http://maps.google.com/?q=252 Adelaide St E, Toronto, ON, Canada">
				<span>252 Adelaide St E</span>
				<span>Toronto, Ontario</span>
				<span>M5A 1N1</span>
			</a>
		</div>
		<div class="address vancouver">
			<h3>Vancouver</h3>
			<a data-long-lat="49.28411,-123.11223" href="http://maps.google.com/?q=312-510 West Hastings, Vancouver, BC, Canada">

				<span>312-510 West Hastings</span>
				<span>Vancouver, BC</span>
				<span>V6B 1L8</span>
			</a>
		</div>
		<div class="address chernihiv">
			<h3>Chernihiv</h3>
			<a data-long-lat="51.497299,31.311979" href="http://maps.google.com/?q=21a Voiniv-Internatsionalistiv St, Chernihiv, Ukraine">
				<span>21a Voiniv-Internatsionalistiv St</span>
				<span>Chernihiv, Ukraine</span>
				<span>14000</span>
			</a>
		</div>
		<div class="address chicago">
			<h3>Chicago</h3>
			<a data-long-lat="41.881567,-87.633187" href="http://maps.google.com/?q=155 North Wacker Dr. Chicago, IL">
				<span>155 North Wacker Dr.</span>
				<span>Chicago, IL</span>
				<span>60606</span>
			</a>
		</div>
	</div>
</footer>

				</section>

				<article id="article" style="position: static; margin-left: 100%;">
					<div id="article-inner"  class="reveal">
						
						




	








	
	
	
	
	









<div class="article-banner" style="background-image: url(/swat/images/default-covers/5.jpg);" >
	<img src="/swat/images/default-covers/5.jpg" style="display:none; visibility:hidden;" />
</div>
<div class="article-title">
	
	<h1>
		
			
			<span>Translating Panel</span><span>Content Titles</span><span>Using Tokens</span>
		
	</h1>
	
</div>




<div class="article-body" data-tag="technology">
	<div class="article-info">

		


		
			<div class="author-picture">
				
					<a href="/swat/people/jeremy-lichtman">
						<img src="/swat/associated-files/people/jeremy-lichtman/avatar.jpg" alt="Author Picture" />
					</a>
				
			</div>
		


		

		
			<div class="author-info">

				

				
					
						<a class="author-name" href="/swat/people/jeremy-lichtman">Jeremy Lichtman</a>
					
				


				
				

			</div>
		

		
		
			<ul class="article-tags">
				
					<li><a href="/swat/tags/technology">technology</a></li>
				
			</ul>
		
	</div>


	

	
		<div class="article-content">
			<h2 id="we-recently-encountered-a-specific-situation-with-a-drupal-site-that-had-to-be-retro-fitted-for-translation-">We recently encountered a specific situation with a Drupal site that had to be retro-fitted for translation.</h2>
<p>The titles of content items within a panel page are not translatable.</p>
<p>There is an issue in the queue for panels, but it has been open for two years now, and it is unlikely to be resolved any time soon. There are also many somewhat hackish work-arounds - i.e. using blocks with the title inserted as content instead - but we found a cleaner way to do this using tokens, which panels do provide support for.</p>
<p>If you&#39;ve ever coded a custom block, the methodology for creating tokens will look familiar. In a custom module, you first implement hook_token_info(), which lets Drupal know about the list of tokens that your module will provide, and then implement hook_tokens(), which actually outputs the content of the code.</p>
<pre><code class="lang-php">function test_token_info() {
    $type = array(
        &#39;name&#39; =&gt; t(&#39;Test Tokens&#39;),
        &#39;description&#39; =&gt; t(&#39;Tokens for i18n experiment.&#39;)
    );

$test[&#39;test_panel_translation_title&#39;] = array(
    &#39;name&#39; =&gt; t(&quot;Test title translation&quot;),
    &#39;description&#39; =&gt; t(&#39;Translatable version of panel content title&#39;),
);

return array(
        &#39;types&#39; =&gt; array(&#39;test&#39; =&gt; $type),
        &#39;tokens&#39; =&gt; array(&#39;test&#39; =&gt; $test),
    );
}
</code></pre>
<p>The code, above, lets Drupal know what this module produces in the way of tokens. The $type array contains information that will be displayed about the module itself, and the $test array contains information about the token itself. You can add many tokens into the $test array, of course (and name the array appropriately for your module as well).</p>
<pre><code class="lang-php">    /**
      * Implements hook_tokens().
      */

    function test_tokens($type, $tokens, array $data = array(), array $options = array()){
        return array(
            &#39;test_panel_translation_title&#39; =&gt; t(&#39;My title is now translatable&#39;),
        );
    }
</code></pre>
<p>The code, above, actually produces the contents of the token. Note that we have wrapped our text in t(), so it is translatable.</p>
<p>You&#39;ll obviously need to enable your module (in addition to the <a href="https://drupal.org/project/token">token module</a>) and clear your cache.</p>
<p>Now let&#39;s see how we can use the new token inside of panels.</p>
<p><img src="/associated-files/article/translating-panel-content-tiles-using-tokens/body_1.jpg" alt=""></p>
<p>As you can see, we need to first add something into your panel that lets it know that you are going to be using tokens. After you add in tokens, you&#39;ll see your new tokens listed.</p>
<p><img src="/associated-files/article/translating-panel-content-tiles-using-tokens/body_2.jpg" alt=""></p>
<p><img src="/associated-files/article/translating-panel-content-tiles-using-tokens/body_3.jpg" alt=""></p>
<p><img src="/associated-files/article/translating-panel-content-tiles-using-tokens/body_4.jpg" alt=""></p>
<p>Now we can actually change our content title to a token.</p>
<p><img src="/associated-files/article/translating-panel-content-tiles-using-tokens/body_5.jpg" alt=""></p>
<p>The token appears in the list of available substitutions, so you don&#39;t need to remember it.</p>
<p><img src="/associated-files/article/translating-panel-content-tiles-using-tokens/body_6.jpg" alt=""></p>
<p>ou&#39;ll need to select the &quot;Use context keywords&quot; option so that panels knows that it needs to make substitutions on tokens in this content item.</p>
<p>Aside: We can also use tokens inside of content itself.</p>
<p><img src="/associated-files/article/translating-panel-content-tiles-using-tokens/body_7.jpg" alt=""></p>
<p>If you are exporting your panel to code (i.e. with features), the token will appear in the actual code as well.</p>
<p><img src="/associated-files/article/translating-panel-content-tiles-using-tokens/body_8.jpg" alt=""></p>
<p>As you can see, using tokens is a simple method, producing clean, easy to document code, for translating items in Drupal that are otherwise hard to make translatable.</p>


			
			<div class="article-footer">
				<div class="navlinks">
  <a href="/article/drupalcamp-toronto-2013" title="Previous Post: DrupalCamp Toronto 2013" class="navlinks-prev">&laquo; DrupalCamp Toronto 2013</a>
  <a href="/people/peter-last" title="Next Post: Peter Last" class="navlinks-next">Peter Last &raquo;</a>
</div>
				<div class="footer-doodle technology"></div>
			</div>
		</div>
	

</div>

						
					</div>
					<div class="loading-overlay" style="display:none;">
						<div class="loading-spinner"></div>
					</div>
				</article>
				<!-- <![endif]-->

				<!--[if (IE 8) | (IE 9)]>
				
				<article id="article">
					<div id="article-inner" >
						




	








	
	
	
	
	









<div class="article-banner" style="background-image: url(/swat/images/default-covers/5.jpg);" >
	<img src="/swat/images/default-covers/5.jpg" style="display:none; visibility:hidden;" />
</div>
<div class="article-title">
	
	<h1>
		
			
			<span>Translating Panel</span><span>Content Titles</span><span>Using Tokens</span>
		
	</h1>
	
</div>




<div class="article-body" data-tag="technology">
	<div class="article-info">

		


		
			<div class="author-picture">
				
					<a href="/swat/people/jeremy-lichtman">
						<img src="/swat/associated-files/people/jeremy-lichtman/avatar.jpg" alt="Author Picture" />
					</a>
				
			</div>
		


		

		
			<div class="author-info">

				

				
					
						<a class="author-name" href="/swat/people/jeremy-lichtman">Jeremy Lichtman</a>
					
				


				
				

			</div>
		

		
		
			<ul class="article-tags">
				
					<li><a href="/swat/tags/technology">technology</a></li>
				
			</ul>
		
	</div>


	

	
		<div class="article-content">
			<h2 id="we-recently-encountered-a-specific-situation-with-a-drupal-site-that-had-to-be-retro-fitted-for-translation-">We recently encountered a specific situation with a Drupal site that had to be retro-fitted for translation.</h2>
<p>The titles of content items within a panel page are not translatable.</p>
<p>There is an issue in the queue for panels, but it has been open for two years now, and it is unlikely to be resolved any time soon. There are also many somewhat hackish work-arounds - i.e. using blocks with the title inserted as content instead - but we found a cleaner way to do this using tokens, which panels do provide support for.</p>
<p>If you&#39;ve ever coded a custom block, the methodology for creating tokens will look familiar. In a custom module, you first implement hook_token_info(), which lets Drupal know about the list of tokens that your module will provide, and then implement hook_tokens(), which actually outputs the content of the code.</p>
<pre><code class="lang-php">function test_token_info() {
    $type = array(
        &#39;name&#39; =&gt; t(&#39;Test Tokens&#39;),
        &#39;description&#39; =&gt; t(&#39;Tokens for i18n experiment.&#39;)
    );

$test[&#39;test_panel_translation_title&#39;] = array(
    &#39;name&#39; =&gt; t(&quot;Test title translation&quot;),
    &#39;description&#39; =&gt; t(&#39;Translatable version of panel content title&#39;),
);

return array(
        &#39;types&#39; =&gt; array(&#39;test&#39; =&gt; $type),
        &#39;tokens&#39; =&gt; array(&#39;test&#39; =&gt; $test),
    );
}
</code></pre>
<p>The code, above, lets Drupal know what this module produces in the way of tokens. The $type array contains information that will be displayed about the module itself, and the $test array contains information about the token itself. You can add many tokens into the $test array, of course (and name the array appropriately for your module as well).</p>
<pre><code class="lang-php">    /**
      * Implements hook_tokens().
      */

    function test_tokens($type, $tokens, array $data = array(), array $options = array()){
        return array(
            &#39;test_panel_translation_title&#39; =&gt; t(&#39;My title is now translatable&#39;),
        );
    }
</code></pre>
<p>The code, above, actually produces the contents of the token. Note that we have wrapped our text in t(), so it is translatable.</p>
<p>You&#39;ll obviously need to enable your module (in addition to the <a href="https://drupal.org/project/token">token module</a>) and clear your cache.</p>
<p>Now let&#39;s see how we can use the new token inside of panels.</p>
<p><img src="/associated-files/article/translating-panel-content-tiles-using-tokens/body_1.jpg" alt=""></p>
<p>As you can see, we need to first add something into your panel that lets it know that you are going to be using tokens. After you add in tokens, you&#39;ll see your new tokens listed.</p>
<p><img src="/associated-files/article/translating-panel-content-tiles-using-tokens/body_2.jpg" alt=""></p>
<p><img src="/associated-files/article/translating-panel-content-tiles-using-tokens/body_3.jpg" alt=""></p>
<p><img src="/associated-files/article/translating-panel-content-tiles-using-tokens/body_4.jpg" alt=""></p>
<p>Now we can actually change our content title to a token.</p>
<p><img src="/associated-files/article/translating-panel-content-tiles-using-tokens/body_5.jpg" alt=""></p>
<p>The token appears in the list of available substitutions, so you don&#39;t need to remember it.</p>
<p><img src="/associated-files/article/translating-panel-content-tiles-using-tokens/body_6.jpg" alt=""></p>
<p>ou&#39;ll need to select the &quot;Use context keywords&quot; option so that panels knows that it needs to make substitutions on tokens in this content item.</p>
<p>Aside: We can also use tokens inside of content itself.</p>
<p><img src="/associated-files/article/translating-panel-content-tiles-using-tokens/body_7.jpg" alt=""></p>
<p>If you are exporting your panel to code (i.e. with features), the token will appear in the actual code as well.</p>
<p><img src="/associated-files/article/translating-panel-content-tiles-using-tokens/body_8.jpg" alt=""></p>
<p>As you can see, using tokens is a simple method, producing clean, easy to document code, for translating items in Drupal that are otherwise hard to make translatable.</p>


			
			<div class="article-footer">
				<div class="navlinks">
  <a href="/article/drupalcamp-toronto-2013" title="Previous Post: DrupalCamp Toronto 2013" class="navlinks-prev">&laquo; DrupalCamp Toronto 2013</a>
  <a href="/people/peter-last" title="Next Post: Peter Last" class="navlinks-next">Peter Last &raquo;</a>
</div>
				<div class="footer-doodle technology"></div>
			</div>
		</div>
	

</div>

					</div>
					<footer class="footer" id="contact">
	<div class="contact-info">
		<div class="email-us">
			<h3>e-mail us</h3>
			<p>hello@myplanet.io</p>
		</div>
		<div class="call-us">
			<h3>call us</h3>
			<p>1-866-232-7456</p>
		</div>
	</div>
	<div class="additional-info">
		<div class="contact">
			<h3>Connect with us</h3>
			<ul class="social-media-footer">
				<li><a class="twitter" href="http://twitter.com/myplanetHQ" target="_blank">Twitter</a></li>
				<li><a class="facebook" href="http://www.facebook.com/myplanetHQ" target="_blank">Facebook</a></li>
				<li><a class="dribbble" href="http://dribbble.com/myplanet" target="_blank">Dribbble</a></li>
				<li><a class="drupal" href="http://drupal.org/node/1121200" target="_blank">Drupal</a></li>
				<li><a class="linkedin" href="http://www.linkedin.com/company/701891" target="_blank">Linkedin</a></li>
			</ul>
		</div>
		<div class="address toronto">
			<h3>Toronto</h3>
			<a data-long-lat="43.65163,-79.37104" href="http://maps.google.com/?q=252 Adelaide St E, Toronto, ON, Canada">
				<span>252 Adelaide St E</span>
				<span>Toronto, Ontario</span>
				<span>M5A 1N1</span>
			</a>
		</div>
		<div class="address vancouver">
			<h3>Vancouver</h3>
			<a data-long-lat="49.28411,-123.11223" href="http://maps.google.com/?q=312-510 West Hastings, Vancouver, BC, Canada">

				<span>312-510 West Hastings</span>
				<span>Vancouver, BC</span>
				<span>V6B 1L8</span>
			</a>
		</div>
		<div class="address chernihiv">
			<h3>Chernihiv</h3>
			<a data-long-lat="51.497299,31.311979" href="http://maps.google.com/?q=21a Voiniv-Internatsionalistiv St, Chernihiv, Ukraine">
				<span>21a Voiniv-Internatsionalistiv St</span>
				<span>Chernihiv, Ukraine</span>
				<span>14000</span>
			</a>
		</div>
		<div class="address chicago">
			<h3>Chicago</h3>
			<a data-long-lat="41.881567,-87.633187" href="http://maps.google.com/?q=155 North Wacker Dr. Chicago, IL">
				<span>155 North Wacker Dr.</span>
				<span>Chicago, IL</span>
				<span>60606</span>
			</a>
		</div>
	</div>
</footer>

				</article>
				
				<![endif]-->

			</div>

			<!-- MENU GOES HERE -->
			


<div id="menu">
	<ul class="nav navbar-nav">
		
			

				
				
				

				<li class="home">
					<a  
						href="/swat/"
						
							data-banner="&lt;p&gt;Hello, we're myplanet&lt;br/&gt;We &lt;em&gt;empower&lt;/em&gt; organizations to deliver great digital &lt;em&gt;products&lt;/em&gt;&lt;/p&gt;"
						
						data-menu-colour="#f05a28"
						data-menu-doodle="bannerdoodle.png"
						data-tag="home"
					>
						<span>
							Home
						</span>
					</a>
				</li>
			
		
			

				
				
				

				<li class="company">
					<a  
						href="/swat/tags/company"
						
							data-banner="&lt;p&gt;We provide UX &amp; technology solutions to build the right thing, fast.(We also do bar mitzvahs.)&lt;/p&gt;"
						
						data-menu-colour="#f05a28"
						data-menu-doodle="banner-doodle-what-we-do.png"
						data-tag="company"
					>
						<span>
							What We Do
						</span>
					</a>
				</li>
			
		
			

				
				
				

				<li class="people">
					<a  
						href="/swat/tags/people"
						
							data-banner="&lt;p&gt;Tired of herding wild cats, we let them organize themselves. It worked pretty well. Meet our team.&lt;/p&gt;"
						
						data-menu-colour="#f05a28"
						data-menu-doodle="banner-doodle-what-we-do.png"
						data-tag="people"
					>
						<span>
							People
						</span>
					</a>
				</li>
			
		
			

				
				
				

				<li class="careers">
					<a  
						href="/swat/tags/careers"
						
							data-banner="&lt;p&gt;Join our merry band of designers, technologists, business folk and shameless pug lovers.&lt;/p&gt;"
						
						data-menu-colour="#f05a28"
						data-menu-doodle="banner-doodle-what-we-do.png"
						data-tag="careers"
					>
						<span>
							Careers
						</span>
					</a>
				</li>
			
		
			

				
				
				

				<li class="contact">
					<a  data-attr=contact-link
						href="#contact"
						
							data-banner="&lt;p&gt;The &quot;why&quot; we build - in discovery, we seek to understand what problem we are solving and for whom.&lt;/p&gt;"
						
						data-menu-colour="#f16838"
						data-menu-doodle="bannerdoodle.png"
						data-tag="contact"
					>
						<span>
							Contact
						</span>
					</a>
				</li>
			
		
			

				
				
				

				<li class="design">
					<a  
						href="/swat/tags/design"
						
							data-banner="&lt;p&gt;And now, our thoughts on design.&lt;/p&gt;"
						
						data-menu-colour="#5f5ca9"
						data-menu-doodle="banner-doodle-design.png"
						data-tag="design"
					>
						<span>
							Design
						</span>
					</a>
				</li>
			
		
			

				
				
				

				<li class="technology active">
					<a  
						href="/swat/tags/technology"
						
							data-banner="&lt;p&gt;Some thoughts on technology.&lt;/p&gt;"
						
						data-menu-colour="#58c0a2"
						data-menu-doodle="banner-doodle-design.png"
						data-tag="technology"
					>
						<span>
							Technology
						</span>
					</a>
				</li>
			
		
			

				
				
				

				<li class="community">
					<a  
						href="/swat/tags/community"
						
							data-banner="&lt;p&gt;More than just software, open source is a philosophy — one of openness and community.&lt;/p&gt;"
						
						data-menu-colour="#ea3d67"
						data-menu-doodle="banner-doodle-design.png"
						data-tag="community"
					>
						<span>
							Community
						</span>
					</a>
				</li>
			
		
	</ul>
</div>

<!--[if (!IE) | (gte IE 10)]> -->
<div id="menu-toggle"><button id="menu-button">Show Menu</button></div>
<!-- <![endif]-->

		</div>
		<!--[if IE 8]>
		<script src="/swat/scripts/vendor/jquery-1.11.0.min.js"></script>
		<script src="/swat/scripts/menu-ie8.js"></script>
		<![endif]-->
		<!--[if (!IE) | (gte IE 9)]> -->
		<script src="/swat/scripts/vendor/jquery-2.1.0.min.js"></script>
		<!-- <![endif]-->
		<script >(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-16401713-2');
ga('send', 'pageview');</script><script defer="defer"  src="/swat/scripts/pollyfill.js"></script><script defer="defer"  src="/swat/scripts/vendor/scrollfix.js"></script><script defer="defer"  src="/swat/scripts/variables.js"></script><script defer="defer"  src="/swat/scripts/modules/menu.js"></script><script defer="defer"  src="/swat/scripts/modules/tiles.js"></script><script defer="defer"  src="/swat/scripts/modules/elevator.js"></script><script defer="defer"  src="/swat/scripts/modules/banner.js"></script><script defer="defer"  src="/swat/scripts/main.js"></script><script defer="defer"  src="/swat/scripts/vendor/fastclick.js"></script><script defer="defer"  src="/swat/scripts/vendor/history.min.js"></script><script defer="defer"  src="/swat/scripts/init.js"></script><script defer="defer"  src="/swat/scripts/vendor/prism.js"></script>
		<!--[if (IE 8) | (IE 9)]>
		<script src="/swat/scripts/menu-ie8.js"></script>
		<![endif]-->
	</body>
</html>
